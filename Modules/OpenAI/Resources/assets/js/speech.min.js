"use strict";function hideProviderOptions(){$(".ProviderOptions").each((function(){$(this).addClass("hidden")}))}$(document).ready((function(){var e=$(".file_input"),t=$("#duration"),i=$(".file-msg"),n=$(".upload-loader"),a=$("#deleteButton");function r(){a.show()}function d(){a.hide()}e.on("change",(function(){if(1===this.files.length){var a=this.files[0];a.type.startsWith("audio/")?(n.removeClass("hidden"),i.addClass("hidden"),setTimeout((function(){var e=a.name,d=new Audio;d.src=URL.createObjectURL(a),d.onloadedmetadata=function(){var n=d.duration;i.text(e),t.val(n.toFixed(2)),r()},d.onerror=function(){var n=d.duration;i.text(e),t.val(n.toFixed(2)),r()},n.addClass("hidden"),i.removeClass("hidden"),!1}),1e3)):(toastMixin.fire({title:jsLang("Please select a valid audio file."),icon:"error"}),e.val(""),i.html('<div class="file-msg justify-center items-center flex gap-2.5 text-color-14 dark:text-white line-clamp-single"><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.99935 0.666016C6.36754 0.666016 6.66602 0.964492 6.66602 1.33268V5.33268H10.666C11.0342 5.33268 11.3327 5.63116 11.3327 5.99935C11.3327 6.36754 11.0342 6.66602 10.666 6.66602H6.66602V10.666C6.66602 11.0342 6.36754 11.3327 5.99935 11.3327C5.63116 11.3327 5.33268 11.0342 5.33268 10.666V6.66602H1.33268C0.964492 6.66602 0.666016 6.36754 0.666016 5.99935C0.666016 5.63116 0.964492 5.33268 1.33268 5.33268H5.33268V1.33268C5.33268 0.964492 5.63116 0.666016 5.99935 0.666016Z" fill="currentColor"/></svg><p>Click or drag audio file here</p></div>'),t.val(""),d())}else i.html('<div class="file-msg justify-center items-center flex gap-2.5 text-color-14 dark:text-white line-clamp-single"><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.99935 0.666016C6.36754 0.666016 6.66602 0.964492 6.66602 1.33268V5.33268H10.666C11.0342 5.33268 11.3327 5.63116 11.3327 5.99935C11.3327 6.36754 11.0342 6.66602 10.666 6.66602H6.66602V10.666C6.66602 11.0342 6.36754 11.3327 5.99935 11.3327C5.63116 11.3327 5.33268 11.0342 5.33268 10.666V6.66602H1.33268C0.964492 6.66602 0.666016 6.36754 0.666016 5.99935C0.666016 5.63116 0.964492 5.33268 1.33268 5.33268H5.33268V1.33268C5.33268 0.964492 5.63116 0.666016 5.99935 0.666016Z" fill="currentColor"/></svg><p>Click or drag audio file here</p></div>'),t.val(""),d()})),a.on("click",(function(n){n.preventDefault(),e.val(null),i.html('<div class="file-msg justify-center items-center flex gap-2.5 text-color-14 dark:text-white line-clamp-single"><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.99935 0.666016C6.36754 0.666016 6.66602 0.964492 6.66602 1.33268V5.33268H10.666C11.0342 5.33268 11.3327 5.63116 11.3327 5.99935C11.3327 6.36754 11.0342 6.66602 10.666 6.66602H6.66602V10.666C6.66602 11.0342 6.36754 11.3327 5.99935 11.3327C5.63116 11.3327 5.33268 11.0342 5.33268 10.666V6.66602H1.33268C0.964492 6.66602 0.666016 6.36754 0.666016 5.99935C0.666016 5.63116 0.964492 5.33268 1.33268 5.33268H5.33268V1.33268C5.33268 0.964492 5.63116 0.666016 5.99935 0.666016Z" fill="currentColor"/></svg><p>Click or drag audio file here</p></div>'),t.val(""),!0,d()}))})),$(document).ready((function(){$("#text-generate").on("click",(function(){$("#file_input")[0].files.length>0?$(".file-drop-area").removeClass("mb-5"):$(".file-drop-area").addClass("mb-5")})),$("#file_input").on("change",(function(){$("#file_input")[0].files.length>0&&$(".file-drop-area").removeClass("mb-5")}))})),$(document).on("submit","#speech-to-text-form",(function(e){let t=$(this).serializeArray();var i=t.find((function(e){return"provider"===e.name}));var n=i?i.value:null;e.preventDefault();var a="",r=new FormData;r.append("provider",n),$(`[name^="${n}["]`).each((function(){var e=$(this).attr("name"),t=$(this).val();if(null!=t){var i=e.replace(`${n}[`,"").replace("]","");r.append(i,t)}}));var d=$("#file_input")[0].files[0];d&&r.append("file",d),r.append("duration",$("#duration").val()||""),r.append("dataType","json"),r.append("_token",CSRF_TOKEN),$.ajax({url:SITE_URL+"/"+PROMT_URL,type:"POST",data:r,contentType:!1,cache:!1,processData:!1,beforeSend:function(e){$(".loader").removeClass("hidden"),$("#text-generate").attr("disabled","disabled"),e.setRequestHeader("Authorization","Bearer "+ACCESS_TOKEN)},success:function(e){a=e.data.content,tinyMCE.activeEditor.setContent(a,{format:"raw"});var t=$(".minute-credit-remaining");if(t.length>0){var i=parseFloat(t.text());if(!isNaN(i)&&null!=e.data.meta.minutes){var n=i-e.data.meta.minutes;n<0&&(n=0),t.text(n.toFixed(2))}}},complete:()=>{$(".loader").addClass("hidden"),$("#text-generate").removeAttr("disabled")},error:function(e){$(".loader").addClass("hidden");var t=JSON.parse(e.responseText);errorMessage(t.error,"text-generate")}})})),$(".AdavanceOption").on("click",(function(){"hidden"==$("#ProviderOptionDiv").attr("class")?(hideProviderOptions(),$("."+$("#provider option:selected").val()+"_div").removeClass("hidden"),$("#ProviderOptionDiv").removeClass("hidden")):$("#ProviderOptionDiv").addClass("hidden")})),$("#provider").on("change",(function(){hideProviderOptions(),$("."+$(this).val()+"_div").removeClass("hidden")})),$("#provider").on("change",(function(){hideProviderOptions(),$("."+$(this).val()+"_div").removeClass("hidden")}));